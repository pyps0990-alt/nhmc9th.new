<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <link rel="manifest" href="manifest.json">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>內湖高中軍武社</title>

  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- AOS 動畫 -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

  <!-- 字體 -->
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500&family=Roboto&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      opacity: 1;
      transition: opacity 0.4s ease;
    }
    body.fade-out {
      opacity: 0;
    }
    h1, h2, h3 {
      font-family: 'Oswald', sans-serif;
    }
  </style>
</head>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<body class="bg-gray-900 text-white">
<header class="bg-green-900 p-4 flex justify-between items-center">
  <h1 class="text-xl md:text-2xl font-bold text-yellow-400">內湖高中軍武社</h1>
  <div class="relative">
    <button id="menuBtn" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-300 font-semibold text-sm md:text-base">
      ☰ 選單
    </button>
    <div id="menuList" class="absolute right-0 mt-2 w-48 bg-gray-800 rounded shadow-lg hidden z-50">
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/index.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">🏠 首頁</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/map.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">🗺️ 教室地圖</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/schedule.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">📅 活動排程</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/checkin.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">📝 社課簽到</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/finance.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">💰 財務紀錄</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/knowledge.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">📚 知識分享</a>
      <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/about.html" class="block px-4 py-2 text-white hover:bg-green-700 text-sm">🎖 關於我們</a>
      <!-- 幹部後台選單項目（預設隱藏） -->
      <a href="pages/admin.html" id="adminLink" class="block px-4 py-2 text-white hover:bg-green-700 text-sm hidden">🛡️ 幹部後台</a>
      <!-- 登出按鈕（預設隱藏） -->
      <button id="logoutBtn" class="block w-full text-left px-4 py-2 text-white hover:bg-red-700 text-sm hidden">🚪 登出</button>

    </div>
  </div>
</header>
<!-- 幹部登入區塊 -->
<div id="loginPanel" class="bg-gray-800 p-4 text-sm md:text-base text-white flex justify-between items-center">
  <div id="adminStatus">🔒 幹部尚未登入</div>
  <div class="space-x-2">
    <input type="email" id="adminEmail" placeholder="幹部 Email" class="px-2 py-1 rounded bg-gray-700 text-white border border-gray-500">
    <input type="password" id="adminPassword" placeholder="密碼" class="px-2 py-1 rounded bg-gray-700 text-white border border-gray-500">
    <button id="loginBtn" class="bg-yellow-400 text-black px-3 py-1 rounded hover:bg-yellow-300">登入</button>
    <button id="logoutBtn" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 hidden">登出</button>
  </div>
</div>

<!-- 主視覺區 -->
<section class="relative bg-black text-white py-20 px-4 text-center overflow-hidden" data-aos="fade-up">
  <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('assets/images/IMG_1645.jpg');"></div>
  <div class="relative z-10 max-w-3xl mx-auto">
    <h1 class="text-3xl md:text-5xl font-bold text-yellow-300 mb-4 tracking-wide">紀律・榮譽・責任</h1>
    <p class="text-base md:text-xl text-gray-200 mb-6">打造最專業的高中軍武社網站</p>
    <a href="pages/about.html" class="inline-block bg-yellow-400 text-black font-semibold px-6 py-3 rounded hover:bg-yellow-300 transition transform hover:scale-105 text-sm md:text-base">認識我們 →</a>
  </div>
</section>

<!-- 最新公告 -->
<section class="bg-green-950 text-white py-10 px-4 md:px-8" data-aos="fade-right">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-xl md:text-2xl font-bold text-yellow-300 mb-4">📣 最新公告</h2>
    <ul class="list-disc list-inside text-gray-200 space-y-2 text-sm md:text-base">
      <li>2025/09/22 社團專屬簽到系統已上線，下次社團課將採取網頁線上簽到，幹部請務必登入後台</li>
      <li>2025/10/14~10/15 內湖高中第一次段考</li>
      <li>2025/10/19 在台灣CQB俱樂部舉行新訓</li>
    </ul>
  </div>
</section>

<!-- 活動精華影片 -->
<section class="bg-gray-900 text-white py-10 px-4 text-center" data-aos="zoom-in">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-xl md:text-2xl font-bold text-yellow-300 mb-4">🎥 活動精華影片</h2>
    <div class="aspect-w-16 aspect-h-9 w-full rounded overflow-hidden shadow-lg">
      <iframe src="https://youtu.be/N3kuLgAiLJc?si=lb-K7OGEYvWbef5v" frameborder="0" allowfullscreen class="w-full h-full"></iframe>
    </div>
    <p class="text-gray-400 mt-4 text-sm md:text-base">影片由幹部剪輯，完整記錄軍武社的榮耀時刻</p>
  </div>
</section>

<!-- 模組入口區 -->
<main class="grid grid-cols-1 md:grid-cols-2 gap-6 p-4 md:p-8">
  <!-- 社課簽到 -->
  <a href="https://pyps0990-alt.github.io/nhmc9th.new/pages/checkin.html" class="block bg-green-800 hover:bg-green-700 rounded-lg p-6 shadow-lg transition transform hover:scale-105" data-aos="fade-up">
    <h2 class="text-yellow-300 text-xl font-bold mb-2">📝 社課簽到</h2>
    <p class="text-gray-200 text-sm">社團專用簽到系統，紀錄出席狀況。</p>
  </a>

  <!-- LINE 群組連結 -->
  <a href="https://line.me/ti/g/ssQssHJu4D" target="_blank" class="block bg-green-800 hover:bg-green-700 rounded-lg p-6 shadow-lg transition transform hover:scale-105" data-aos="fade-up" data-aos-delay="100">
    <h2 class="text-yellow-300 text-xl font-bold mb-2">💬 LINE 社群</h2>
    <p class="text-gray-200 text-sm">點擊加入軍武社 LINE 群組，掌握即時通知與交流。</p>
  </a>
</main>

<!-- JavaScript 修正選單與轉場 -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBLsMAvPcpKBoeIfAA-hF2UGrrU5RRS7t4",
    authDomain: "nhmc9th-672f6.firebaseapp.com",
    projectId: "nhmc9th-672f6",
    appId: "1:470057381540:web:d5e0881cb540a7a58a0031"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const adminStatus = document.getElementById("adminStatus");
  const loginPanel = document.getElementById("loginPanel");
  const adminLink = document.getElementById("adminLink");

loginBtn.addEventListener("click", () => {
  const email = document.getElementById("adminEmail").value.trim();
  const password = document.getElementById("adminPassword").value.trim();
  auth.signInWithEmailAndPassword(email, password)
    .then(() => {
      adminStatus.textContent = "✅ 幹部已登入";
      loginPanel.classList.add("hidden");
      adminLink.classList.remove("hidden");
      logoutBtn.classList.remove("hidden");
    })
    .catch(err => {
      alert("登入失敗：" + err.message);
    });
});

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(reg => console.log('Service Worker registered'))
    .catch(err => console.error('Service Worker failed', err));
}

  
logoutBtn.addEventListener("click", () => {
  auth.signOut().then(() => {
    adminStatus.textContent = "🔒 幹部尚未登入";
    loginPanel.classList.remove("hidden");
    adminLink.classList.add("hidden");
    logoutBtn.classList.add("hidden");
  });
});

auth.onAuthStateChanged(user => {
  if (user) {
    adminStatus.textContent = "✅ 幹部已登入";
    loginPanel.classList.add("hidden");
    adminLink.classList.remove("hidden");
    logoutBtn.classList.remove("hidden");
  } else {
    adminStatus.textContent = "🔒 幹部尚未登入";
    loginPanel.classList.remove("hidden");
    adminLink.classList.add("hidden");
    logoutBtn.classList.add("hidden");
  }
});

  AOS.init();

  document.querySelectorAll("a[href]").forEach(link => {
    link.addEventListener("click", function(e) {
      const href = this.getAttribute("href");
      const isInternal = href && !href.startsWith("http") && !href.startsWith("#") && !href.endsWith(".jpg");
      const isMenuLink = this.closest("#menuList");

      if (isInternal && !isMenuLink) {
        e.preventDefault();
        document.body.classList.add("fade-out");
        setTimeout(() => {
          window.location.href = href;
        }, 400);
      }
    });
  });
</script>

<!-- 頁尾 -->
<script>
  const menuBtn = document.getElementById("menuBtn");
  const menuList = document.getElementById("menuList");

  menuBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    menuList.classList.toggle("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!menuBtn.contains(e.target) && !menuList.contains(e.target)) {
      menuList.classList.add("hidden");
    }
  });
</script>

<footer class="bg-gray-800 text-center p-4 text-xs md:text-sm text-gray-400">
  &copy; 2025 內湖高中軍武社 | 設計者：奕嘉
</footer>
</body>
</html>
